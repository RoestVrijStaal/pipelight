#!/usr/bin/env bash

# Default configuration
prefix=/usr/local/

usage ()
{
	echo ""
	echo "Usage: ./configure [--prefix=PREFIX]"
	echo ""
}

while [[ $# > 0 ]] ; do
	CMD="$1"; shift
	case "$CMD" in
		--prefix=*)
			prefix=${CMD#*=}
			;;
		--prefix)
			prefix="$1"; shift
			;;

		--help)
			usage
			exit
			;;
		*)
			echo "WARNING: Unknown argument $CMD." >&2
			;;
	esac
done

# Normalize the path
prefix=$(readlink -m "$prefix")

echo "Configuration Summary"
echo "---------------------"
echo
echo "Pipelight has been configured with"
echo "    prefix = $prefix"
echo ""
echo "IMPORTANT: Please ensure you have XATTR support enabled for both wine and"
echo "           your file system (required to watch DRM protected content)!"
echo

echo "prefix=$prefix" > config.make
exit 0